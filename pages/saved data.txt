import Head from "next/head";
import { Inter } from "next/font/google";
import styles from "@/styles/Home.module.css";
import axios from "axios";
import { GetStaticProps } from "next";
import Image from "next/image";
import { useEffect, useState } from "react";

const inter = Inter({ subsets: ["latin"] });
interface todo {
  title: string;
  publishedAt: string;
  author: string;
  url: string;
  content: string;
  urlToImage: string;
  description: string;
}
export const getStaticProps: GetStaticProps = async () => {
  const category='general';
  const apiKey = "566ab1a52b82494db2e2d4bf4eedd3e5";
  // const apiUrl = `https://newsapi.org/v2/everything?q=keyword&apiKey=${apiKey}&00`;
  const apiUrl = `https://newsapi.org/v2/top-headlines?category=technology&country=in&apiKey=${apiKey}`;
  const todolist = await axios.get(apiUrl);
  const to: todo[] = todolist.data.articles;
  // console.log(to);
  if (!to) {
    return {
      notFound: true,
    };
  }
  return {
    props: { to },
  };
};

export default function Home({ to }: { to: todo[] }) {
  return (
    <>
      <Head>
        <title>News App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.main}>
        <div className={styles.description}>
          <h1 className={styles.thirteen}>News For You</h1>
          <button className={styles.thirteen} title="Change Category" name="mine">Sports</button>
          {/* <button className={styles.thirteen} title="Change Category" name="mine">{category}</button> */}
        </div>

        {/* <div className={styles.description}>
          <button className={styles.thirteen}>Sports</button>
          <button className={styles.thirteen}> Technology</button>
          <button className={styles.thirteen}> Business </button>
          <button className={styles.thirteen}> Science </button>
          <button className={styles.thirteen}> Education </button>
          <button className={styles.thirteen}> Health</button>
          <button className={styles.thirteen}> Entertainment </button>
        </div> */}
        <div className={styles.grid}>
        {to &&
          to.map((total: todo, index) => {
            return (
              <div className={styles.card} key={index}>
                {/* <div className="news-divtwo">
                  <h2 className="content-area">{total.title.substr(0, 50)}</h2>
                  <p className="content-area">
                    Published date : {total.publishedAt}
                  </p>
                  <p className="content-area">Author : {total.author}</p>
                  <p className="content-area">{total.content.substr(0, 200)}</p>
                  <p style={{ textAlign: "center", marginBottom: "20px" }}>
                    {" "}
                    <button className="card-button">
                      <a href={total.url}>Read Full Article</a>
                    </button>
                  </p>
                </div> */}
                <a
                  href={total.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  key={index}
                >
                  <div className={styles.imgDiv}>
                    {total.urlToImage ? (
                      <Image
                        unoptimized
                        className="ima"
                        src={total.urlToImage}
                        alt="Not Available"
                        width={100}
                        height={20}
                      />
                    ) : null}
                  </div>
                  <h2 className={inter.className}>
                    {total.title} 
                  </h2>
                  <p className={inter.className}>
                    {total.description !== "Comments"
                      ? total.description
                      : total.content.substr(0, 140) + "..."}
                  </p>
                </a>
              </div>
            );
          })}
          </div>
      </main>
    </>
  );
}


//ravindra newsdiv
{/* <div className="news-divtwo">
                  <h2 className="content-area">{total.title.substr(0, 50)}</h2>
                  <p className="content-area">
                    Published date : {total.publishedAt}
                  </p>
                  <p className="content-area">Author : {total.author}</p>
                  <p className="content-area">{total.content.substr(0, 200)}</p>
                  <p style={{ textAlign: "center", marginBottom: "20px" }}>
                    {" "}
                    <button className="card-button">
                      <a href={total.url}>Read Full Article</a>
                    </button>
                  </p>
                </div> */}